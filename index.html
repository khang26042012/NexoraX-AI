<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NexoraX - AI Chat Assistant</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <link rel="stylesheet" href="assets/css/style.css?v=20251011v2">
</head>
<body class="bg-gray-50 text-gray-900">

    <!-- Sidebar -->
    <div id="sidebar" class="fixed left-0 top-0 h-full w-80 bg-white border-r border-gray-200 z-50 sidebar-transition transform -translate-x-full shadow-lg flex flex-col">
        <div class="p-4 border-b border-gray-200 flex-shrink-0">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <!-- Logo sidebar -->
                    <img src="assets/images/nexorax-logo.svg" alt="NexoraX AI Sidebar Logo" class="w-10 h-10 object-contain drop-shadow-lg">
                    <h1 class="text-xl font-semibold text-blue-600">NexoraX</h1>
                </div>
                <div id="closeSidebar" class="w-10 h-10 cursor-pointer hover:bg-gray-100 rounded-lg flex items-center justify-center transition-colors">
                    <svg class="w-6 h-6 text-gray-600" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect width="18" height="18" x="3" y="3" rx="2"/>
                        <path d="M15 3v18"/>
                    </svg>
                </div>
            </div>
        </div>
        
        <div class="p-4 flex-1 flex flex-col overflow-hidden">
            <button id="newChatBtn" class="new-chat-button flex-shrink-0">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-600 dark:text-gray-300">
                    <path d="M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719"/>
                    <path d="M8 12h8"/>
                    <path d="M12 8v8"/>
                </svg>
                <span class="button-text">New chat</span>
            </button>
            
            
            <div id="chatList" class="space-y-2 flex-1 overflow-y-auto custom-scrollbar mt-4">
                <!-- Chat list will be populated here -->
                <div id="noChatHistory" class="flex flex-col items-center justify-center py-20 text-gray-500">
                    <svg class="w-12 h-12 mb-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
                    </svg>
                    <p class="text-sm">No chat history</p>
                </div>
            </div>
        </div>
        
        
        <div class="flex-shrink-0 p-4 border-t border-gray-200 bg-white">
            <!-- User Profile (shown when logged in) -->
            <div id="userProfileSection" class="hidden relative">
                <div class="flex items-center space-x-3 px-3 py-2">
                    <!-- User Avatar -->
                    <div id="userAvatar" class="w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center text-white font-semibold text-lg">
                        U
                    </div>
                    <!-- User Info -->
                    <div class="flex-1 min-w-0">
                        <p id="userDisplayName" class="text-sm font-medium text-gray-900 truncate">Username</p>
                        <p class="text-xs text-gray-500">Online</p>
                    </div>
                    <!-- Menu Button (3 dots) -->
                    <button id="userMenuBtn" class="p-2 hover:bg-gray-100 rounded-lg transition-colors" title="Menu">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-gray-600" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="1"/>
                            <circle cx="12" cy="5" r="1"/>
                            <circle cx="12" cy="19" r="1"/>
                        </svg>
                    </button>
                </div>
                
                <!-- Dropdown Menu -->
                <div id="userDropdownMenu" class="hidden absolute bottom-full left-0 right-0 mb-2 bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden">
                    <button id="settingsBtnFromMenu" class="w-full flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-50 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"/>
                            <circle cx="12" cy="12" r="3"/>
                        </svg>
                        <span class="text-sm">Cài đặt</span>
                    </button>
                    <div class="border-t border-gray-200"></div>
                    <button id="logoutBtnFromMenu" class="w-full flex items-center space-x-3 px-4 py-3 text-red-600 hover:bg-red-50 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                            <polyline points="16 17 21 12 16 7"/>
                            <line x1="21" y1="12" x2="9" y2="12"/>
                        </svg>
                        <span class="text-sm">Đăng xuất</span>
                    </button>
                </div>
            </div>
            
            <!-- Settings Button (shown when logged out or as alternative) -->
            <button id="settingsBtn" class="flex items-center space-x-3 px-3 py-2 text-gray-600 hover:text-gray-900 transition-colors w-full">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"/>
                    <circle cx="12" cy="12" r="3"/>
                </svg>
                <span class="text-sm">Cài đặt</span>
            </button>
        </div>
    </div>
    
    <!-- Sidebar Toggle Button - Mobile -->
    <div id="sidebarToggle" class="fixed top-4 left-4 z-[60] lg:hidden w-10 h-10 bg-white rounded-lg shadow-lg cursor-pointer flex items-center justify-center hover:shadow-xl transition-all" style="opacity: 1; pointer-events: auto;">
        <svg id="mobilePanelLeftIcon" class="w-6 h-6 text-gray-700" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <rect width="18" height="18" x="3" y="3" rx="2"/>
            <path d="M9 3v18"/>
        </svg>
        <svg id="mobilePanelRightIcon" class="w-6 h-6 text-gray-700 hidden" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <rect width="18" height="18" x="3" y="3" rx="2"/>
            <path d="M15 3v18"/>
        </svg>
    </div>
    
    <!-- Sidebar Toggle Button - Desktop -->
    <div id="desktopSidebarToggle" class="fixed top-4 left-4 z-[60] hidden lg:block w-10 h-10 bg-white rounded-lg shadow-lg cursor-pointer flex items-center justify-center hover:shadow-xl transition-all" style="opacity: 1; pointer-events: auto;">
        <svg id="desktopPanelLeftIcon" class="w-6 h-6 text-gray-700" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <rect width="18" height="18" x="3" y="3" rx="2"/>
            <path d="M9 3v18"/>
        </svg>
        <svg id="desktopPanelRightIcon" class="w-6 h-6 text-gray-700 hidden" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <rect width="18" height="18" x="3" y="3" rx="2"/>
            <path d="M15 3v18"/>
        </svg>
    </div>

    <!-- Main Content -->
    <div class="relative">
        <!-- Home Screen -->
        <div id="homeScreen" class="home-container bg-white flex items-center justify-center p-4">
            <div class="w-full max-w-4xl">
                <div class="text-center mb-8 fade-in">
                    <!-- Title -->
                    <h1 class="text-5xl font-semibold mb-4 text-blue-600 slide-in-left">
                        NexoraX
                    </h1>
                </div>
                
                
                <!-- Replit-style Input Area -->
                <div class="w-full max-w-2xl mx-auto mt-8 px-4">
                    <fieldset class="flex w-full min-w-0 flex-col">
                        <div class="!box-content flex flex-col bg-white mx-2 md:mx-0 items-stretch transition-all duration-200 relative cursor-text z-10 rounded-2xl border border-transparent shadow-[0_0.25rem_1.25rem_hsla(0,0%,0%,3.5%),0_0_0_0.5px_hsla(0,0%,0%,15%)] hover:shadow-[0_0.25rem_1.25rem_hsla(0,0%,0%,3.5%),0_0_0_0.5px_hsla(0,0%,0%,30%)] focus-within:shadow-[0_0.25rem_1.25rem_hsla(0,0%,0%,7.5%),0_0_0_0.5px_hsla(0,0%,0%,30%)]">
                            <div class="flex flex-col gap-3.5 m-3.5">
                                <!-- File Preview Area (appears above input when files selected) -->
                                <div id="homeFilePreview" class="hidden flex-wrap gap-2"></div>
                                <!-- Main input row -->
                                <div class="flex gap-2.5 w-full items-center">
                                    <div class="relative flex-1 flex items-center gap-2 shrink min-w-0">
                                        <textarea 
                                            id="homeInput" 
                                            class="flex-1 border-none outline-none bg-transparent text-base text-gray-900 placeholder-gray-500 resize-none min-h-6 max-h-32 overflow-y-auto" 
                                            placeholder="Reply to NexoraX"
                                            autocomplete="off"
                                            rows="1"
                                        ></textarea>
                                    </div>
                                </div>
                                <!-- Bottom row with buttons -->
                                <div class="flex items-center justify-between">
                                    <!-- Left side: Upload and Config buttons -->
                                    <div class="flex items-center gap-2">
                                        <button id="homeUploadBtn" class="flex items-center justify-center w-8 h-8 rounded-lg hover:bg-gray-100 transition-colors" title="Upload ảnh hoặc file">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-600">
                                                <path d="M12 5v14"/>
                                                <path d="M5 12h14"/>
                                            </svg>
                                        </button>
                                        <input type="file" id="homeFileInput" class="hidden" multiple accept="image/*,.pdf,.doc,.docx,.txt">
                                        
                                        <div class="relative">
                                            <button id="homeConfigBtn" class="flex items-center justify-center w-8 h-8 rounded-lg hover:bg-gray-100 transition-colors" title="Tùy chọn nâng cao">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-600">
                                                    <path d="M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z"/>
                                                    <path d="M20 3v4"/>
                                                    <path d="M22 5h-4"/>
                                                    <path d="M4 17v2"/>
                                                    <path d="M5 18H3"/>
                                                </svg>
                                            </button>
                                            <div id="homeConfigDropdown" class="hidden absolute bottom-full left-0 mb-2 bg-white rounded-lg shadow-lg border border-gray-200 py-1 min-w-[200px] z-20">
                                                <button class="config-option w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center gap-2" data-action="image-gen">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                                                        <circle cx="9" cy="9" r="2"/>
                                                        <path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/>
                                                    </svg>
                                                    <span>Tạo ảnh với Pollinations</span>
                                                </button>
                                                <button class="config-option w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center gap-2" data-action="search">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                        <circle cx="11" cy="11" r="8"/>
                                                        <path d="m21 21-4.3-4.3"/>
                                                    </svg>
                                                    <span>Tìm kiếm với Gemini Search</span>
                                                </button>
                                            </div>
                                        </div>
                                        
                                        <!-- Dual Chat Toggle Button -->
                                        <button id="homeDualModeBtn" class="flex items-center justify-center w-8 h-8 rounded-lg hover:bg-gray-100 transition-colors" title="Dual Chat Mode">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-600">
                                                <rect x="3" y="3" width="7" height="18" rx="1"/>
                                                <rect x="14" y="3" width="7" height="18" rx="1"/>
                                            </svg>
                                        </button>
                                        
                                        <!-- Quick Model Selector -->
                                        <div class="relative">
                                            <button id="homeQuickModelBtn" class="flex items-center justify-center w-8 h-8 rounded-lg hover:bg-gray-100 transition-colors" title="Chọn model nhanh">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-600">
                                                    <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/>
                                                    <polyline points="7.5 4.21 12 6.81 16.5 4.21"/>
                                                    <polyline points="7.5 19.79 7.5 14.6 3 12"/>
                                                    <polyline points="21 12 16.5 14.6 16.5 19.79"/>
                                                    <polyline points="3.27 6.96 12 12.01 20.73 6.96"/>
                                                    <line x1="12" y1="22.08" x2="12" y2="12"/>
                                                </svg>
                                            </button>
                                            <div id="homeQuickModelDropdown" class="hidden absolute bottom-full left-0 mb-2 bg-white rounded-lg shadow-xl border border-gray-200 py-1 min-w-[180px] max-h-96 overflow-y-auto z-30">
                                                <button class="quick-model-option w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-blue-50 transition-colors" data-model="gpt-5-chat">GPT-5</button>
                                                <button class="quick-model-option w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-blue-50 transition-colors" data-model="nexorax1">Gemini Flash 2.5</button>
                                                <button class="quick-model-option w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-blue-50 transition-colors" data-model="gemini-search">Gemini Search</button>
                                                <button class="quick-model-option w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-blue-50 transition-colors" data-model="deepseek-v3.1">DeepSeek V3.1</button>
                                                <button class="quick-model-option w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-blue-50 transition-colors" data-model="deepseek-reasoning">DeepSeek Reasoning</button>
                                                <button class="quick-model-option w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-blue-50 transition-colors" data-model="gemini-2.5-flash-lite">Gemini 2.5 Flash</button>
                                                <button class="quick-model-option w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-blue-50 transition-colors" data-model="mistral-small-3.1-24b-instruct-2503">Mistral Small 3.1</button>
                                                <button class="quick-model-option w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-blue-50 transition-colors" data-model="mistral-medium-2508">Mistral Medium</button>
                                                <button class="quick-model-option w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-blue-50 transition-colors" data-model="mistral-small-2503">Mistral Small</button>
                                                <button class="quick-model-option w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-blue-50 transition-colors" data-model="open-mixtral-8x7b">Mixtral 8x7B</button>
                                                <button class="quick-model-option w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-blue-50 transition-colors" data-model="nova-fast">Nova Fast</button>
                                                <button class="quick-model-option w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-blue-50 transition-colors" data-model="gpt-5-mini">GPT-5 Mini</button>
                                                <button class="quick-model-option w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-blue-50 transition-colors" data-model="gpt-5-nano-2025-08-07">GPT-5 Nano</button>
                                                <button class="quick-model-option w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-blue-50 transition-colors" data-model="gpt-o4-mini-2025-04-16">GPT-O4 Mini</button>
                                                <button class="quick-model-option w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-blue-50 transition-colors" data-model="qwen2.5-coder-32b-instruct">Qwen Coder</button>
                                                <button class="quick-model-option w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-blue-50 transition-colors" data-model="roblox-rp">Roblox RP</button>
                                                <button class="quick-model-option w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-blue-50 transition-colors" data-model="bidara">Bidara</button>

                                                <button class="quick-model-option w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-blue-50 transition-colors" data-model="Steelskull/L3.3-MS-Nevoria-70b">Nevoria 70B</button>
                                                <button class="quick-model-option w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-blue-50 transition-colors" data-model="gemma-2-2b-it">Gemma 2</button>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Right side: Send button -->
                                    <button id="homeSendBtn" class="flex items-center justify-center w-8 h-8 rounded-full bg-blue-600 hover:bg-blue-700 transition-colors shadow-lg">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-up-icon lucide-arrow-up text-white">
                                            <path d="m5 12 7-7 7 7"/>
                                            <path d="M12 19V5"/>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </fieldset>
                </div>
                
            </div>
        </div>
        
        <!-- File Preview Modal -->
        <div id="filePreviewModal" class="fixed inset-0 bg-black bg-opacity-50 z-[150] hidden flex items-center justify-center p-4">
            <div class="bg-white rounded-2xl p-6 w-full max-w-lg">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-bold text-gray-900">Files đã chọn</h3>
                    <button id="closeFilePreview" class="p-2 hover:bg-gray-100 rounded-lg">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <div id="filePreviewList" class="space-y-2 max-h-60 overflow-y-auto"></div>
                <div class="flex justify-end space-x-3 mt-4">
                    <button id="clearFiles" class="px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg">Xóa tất cả</button>
                    <button id="confirmFiles" class="px-4 py-2 gradient-bg text-white rounded-lg">OK</button>
                </div>
            </div>
        </div>
        
        <!-- Image Modal -->
        <div id="imageModal" class="fixed inset-0 bg-black bg-opacity-90 z-[200] hidden flex items-center justify-center p-4">
            <div class="relative max-w-4xl max-h-full">
                <button id="closeImageModal" class="absolute top-4 right-4 text-white hover:text-gray-300 z-10">
                    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
                <img id="modalImage" src="" alt="" class="max-w-full max-h-full object-contain rounded-lg">
                <div id="modalImageTitle" class="absolute bottom-4 left-4 bg-black bg-opacity-70 text-white px-4 py-2 rounded-lg"></div>
            </div>
        </div>
        
        <!-- Chat Screen -->
        <div id="chatScreen" class="hidden chat-container">
            <!-- Messages Container -->
            <div id="messagesContainer" class="flex-1 overflow-y-auto p-6 space-y-4 pb-32 custom-scrollbar">
                <!-- Messages will be populated here -->
            </div>
            
            <!-- Replit-style Chat Input Area -->
            <div class="fixed bottom-0 left-0 right-0 p-4 z-10" style="background: linear-gradient(180deg, transparent 0%, rgba(255,255,255,0.8) 20%, #ffffff 100%);">
                <div class="w-full max-w-2xl mx-auto">
                    <fieldset class="flex w-full min-w-0 flex-col">
                        <div class="!box-content flex flex-col bg-white mx-2 md:mx-0 items-stretch transition-all duration-200 relative cursor-text z-10 rounded-2xl border border-transparent shadow-[0_0.25rem_1.25rem_hsla(0,0%,0%,3.5%),0_0_0_0.5px_hsla(0,0%,0%,15%)] hover:shadow-[0_0.25rem_1.25rem_hsla(0,0%,0%,3.5%),0_0_0_0.5px_hsla(0,0%,0%,30%)] focus-within:shadow-[0_0.25rem_1.25rem_hsla(0,0%,0%,7.5%),0_0_0_0.5px_hsla(0,0%,0%,30%)]">
                            <div class="flex flex-col gap-3.5 m-3.5">
                                <!-- File Preview Area (appears above input when files selected) -->
                                <div id="chatFilePreview" class="hidden flex-wrap gap-2"></div>
                                <!-- Main input row -->
                                <div class="flex gap-2.5 w-full items-center">
                                    <div class="relative flex-1 flex items-center gap-2 shrink min-w-0">
                                        <textarea 
                                            id="chatInput" 
                                            class="flex-1 border-none outline-none bg-transparent text-base text-gray-900 placeholder-gray-500 resize-none min-h-6 max-h-32 overflow-y-auto" 
                                            placeholder="Reply to NexoraX"
                                            autocomplete="off"
                                            rows="1"
                                        ></textarea>
                                    </div>
                                </div>
                                <!-- Bottom row with buttons -->
                                <div class="flex items-center justify-between">
                                    <!-- Left side: Upload and Config buttons -->
                                    <div class="flex items-center gap-2">
                                        <button id="chatUploadBtn" class="flex items-center justify-center w-8 h-8 rounded-lg hover:bg-gray-100 transition-colors" title="Upload ảnh hoặc file">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-600">
                                                <path d="M12 5v14"/>
                                                <path d="M5 12h14"/>
                                            </svg>
                                        </button>
                                        <input type="file" id="chatFileInput" class="hidden" multiple accept="image/*,.pdf,.doc,.docx,.txt">
                                        
                                        <div class="relative">
                                            <button id="chatConfigBtn" class="flex items-center justify-center w-8 h-8 rounded-lg hover:bg-gray-100 transition-colors" title="Tùy chọn nâng cao">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-600">
                                                    <path d="M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z"/>
                                                    <path d="M20 3v4"/>
                                                    <path d="M22 5h-4"/>
                                                    <path d="M4 17v2"/>
                                                    <path d="M5 18H3"/>
                                                </svg>
                                            </button>
                                            <div id="chatConfigDropdown" class="hidden absolute bottom-full left-0 mb-2 bg-white rounded-lg shadow-lg border border-gray-200 py-1 min-w-[200px] z-20">
                                                <button class="config-option w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center gap-2" data-action="image-gen">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                                                        <circle cx="9" cy="9" r="2"/>
                                                        <path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/>
                                                    </svg>
                                                    <span>Tạo ảnh với Pollinations</span>
                                                </button>
                                                <button class="config-option w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center gap-2" data-action="search">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                        <circle cx="11" cy="11" r="8"/>
                                                        <path d="m21 21-4.3-4.3"/>
                                                    </svg>
                                                    <span>Tìm kiếm với Gemini Search</span>
                                                </button>
                                            </div>
                                        </div>
                                        
                                        <!-- Dual Chat Toggle Button -->
                                        <button id="chatDualModeBtn" class="flex items-center justify-center w-8 h-8 rounded-lg hover:bg-gray-100 transition-colors" title="Dual Chat Mode">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-600">
                                                <rect x="3" y="3" width="7" height="18" rx="1"/>
                                                <rect x="14" y="3" width="7" height="18" rx="1"/>
                                            </svg>
                                        </button>
                                        
                                        <!-- Quick Model Selector (Hidden - Model đã được chọn ở home) -->
                                        <div class="relative hidden">
                                            <button id="quickModelBtn" class="flex items-center justify-center w-8 h-8 rounded-lg hover:bg-gray-100 transition-colors" title="Chọn model nhanh">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-600">
                                                    <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/>
                                                    <polyline points="7.5 4.21 12 6.81 16.5 4.21"/>
                                                    <polyline points="7.5 19.79 7.5 14.6 3 12"/>
                                                    <polyline points="21 12 16.5 14.6 16.5 19.79"/>
                                                    <polyline points="3.27 6.96 12 12.01 20.73 6.96"/>
                                                    <line x1="12" y1="22.08" x2="12" y2="12"/>
                                                </svg>
                                            </button>
                                            <div id="chatQuickModelDropdown" class="hidden absolute bottom-full left-0 mb-2 bg-white rounded-lg shadow-xl border border-gray-200 py-1 min-w-[180px] max-h-96 overflow-y-auto z-30">
                                                <button class="quick-model-option w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-blue-50 transition-colors" data-model="gpt-5-chat">GPT-5</button>
                                                <button class="quick-model-option w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-blue-50 transition-colors" data-model="nexorax1">Gemini Flash 2.5</button>
                                                <button class="quick-model-option w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-blue-50 transition-colors" data-model="gemini-search">Gemini Search</button>
                                                <button class="quick-model-option w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-blue-50 transition-colors" data-model="deepseek-v3.1">DeepSeek V3.1</button>
                                                <button class="quick-model-option w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-blue-50 transition-colors" data-model="deepseek-reasoning">DeepSeek Reasoning</button>
                                                <button class="quick-model-option w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-blue-50 transition-colors" data-model="gemini-2.5-flash-lite">Gemini 2.5 Flash</button>
                                                <button class="quick-model-option w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-blue-50 transition-colors" data-model="mistral-small-3.1-24b-instruct-2503">Mistral Small 3.1</button>
                                                <button class="quick-model-option w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-blue-50 transition-colors" data-model="mistral-medium-2508">Mistral Medium</button>
                                                <button class="quick-model-option w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-blue-50 transition-colors" data-model="mistral-small-2503">Mistral Small</button>
                                                <button class="quick-model-option w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-blue-50 transition-colors" data-model="open-mixtral-8x7b">Mixtral 8x7B</button>
                                                <button class="quick-model-option w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-blue-50 transition-colors" data-model="nova-fast">Nova Fast</button>
                                                <button class="quick-model-option w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-blue-50 transition-colors" data-model="gpt-5-mini">GPT-5 Mini</button>
                                                <button class="quick-model-option w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-blue-50 transition-colors" data-model="gpt-5-nano-2025-08-07">GPT-5 Nano</button>
                                                <button class="quick-model-option w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-blue-50 transition-colors" data-model="gpt-o4-mini-2025-04-16">GPT-O4 Mini</button>
                                                <button class="quick-model-option w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-blue-50 transition-colors" data-model="qwen2.5-coder-32b-instruct">Qwen Coder</button>
                                                <button class="quick-model-option w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-blue-50 transition-colors" data-model="roblox-rp">Roblox RP</button>
                                                <button class="quick-model-option w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-blue-50 transition-colors" data-model="bidara">Bidara</button>

                                                <button class="quick-model-option w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-blue-50 transition-colors" data-model="Steelskull/L3.3-MS-Nevoria-70b">Nevoria 70B</button>
                                                <button class="quick-model-option w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-blue-50 transition-colors" data-model="gemma-2-2b-it">Gemma 2</button>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Right side: Send button -->
                                    <button id="sendBtn" class="flex items-center justify-center w-8 h-8 rounded-full bg-blue-600 hover:bg-blue-700 transition-colors shadow-lg">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-up-icon lucide-arrow-up text-white">
                                            <path d="m5 12 7-7 7 7"/>
                                            <path d="M12 19V5"/>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </fieldset>
                </div>
            </div>
            
        </div>
    </div>
    
    <!-- Modern Settings Modal -->
    <div id="settingsModal" class="fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm z-[100] hidden flex items-center justify-center p-4">
        <div id="settingsContent" class="modern-settings-card w-full max-w-md">
            <!-- Modern Header with Gradient -->
            <div class="modern-settings-header">
                <div class="flex items-center justify-between w-full">
                    <div class="flex items-center space-x-3">
                        <div class="settings-icon-container">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-white" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"/>
                                <circle cx="12" cy="12" r="3"/>
                            </svg>
                        </div>
                        <div>
                            <h2 class="text-xl font-bold text-white">Cài đặt</h2>
                            <p class="text-blue-100 text-sm opacity-90">Tùy chỉnh trải nghiệm của bạn</p>
                        </div>
                    </div>
                    <button id="cancelSettings" class="modern-close-btn">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
            </div>
            
            <!-- Modern Settings Content -->
            <div class="modern-settings-content">
                
                <!-- Theme Section -->
                <div class="settings-section">
                    <h3 class="settings-section-title">🎨 Giao diện</h3>
                    <button id="themeToggle" class="modern-settings-item theme-item">
                        <div class="settings-item-icon theme-icon">
                            <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
                            </svg>
                        </div>
                        <div class="settings-item-content">
                            <div class="settings-item-title">Chế độ tối</div>
                            <div class="settings-item-subtitle">Bảo vệ mắt trong điều kiện thiếu sáng</div>
                        </div>
                        <div class="theme-toggle-switch">
                            <div class="toggle-track">
                                <div class="toggle-thumb"></div>
                            </div>
                        </div>
                    </button>
                </div>
                
                <!-- Actions Section -->
                <div class="settings-section">
                    <h3 class="settings-section-title">📋 Tác vụ</h3>
                    
                    <button id="aboutBtn" class="modern-settings-item about-item">
                        <div class="settings-item-icon about-icon">
                            <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                        <div class="settings-item-content">
                            <div class="settings-item-title">Về NexoraX</div>
                            <div class="settings-item-subtitle">Thông tin phiên bản và tính năng</div>
                        </div>
                        <div class="settings-item-chevron">
                            <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                            </svg>
                        </div>
                    </button>
                    
                    <button id="clearAllBtn" class="modern-settings-item danger-item">
                        <div class="settings-item-icon danger-icon">
                            <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                            </svg>
                        </div>
                        <div class="settings-item-content">
                            <div class="settings-item-title">Xóa tất cả chat</div>
                            <div class="settings-item-subtitle">Không thể khôi phục sau khi xóa</div>
                        </div>
                        <div class="settings-item-chevron">
                            <svg class="w-5 h-5 text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                            </svg>
                        </div>
                    </button>
                </div>
                
            </div>
        </div>
    </div>
    
    <!-- About Modal -->
    <div id="aboutModal" class="fixed inset-0 bg-black bg-opacity-50 z-[100] hidden flex items-center justify-center p-4">
        <div id="aboutContent" class="bg-white rounded-2xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto scale-95 opacity-0 transition-all duration-300">
            <div class="text-center">
                <img src="assets/images/nexorax-logo.svg" alt="NexoraX AI" class="w-20 h-20 mx-auto mb-4 object-contain drop-shadow-2xl">
                <h2 class="text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-2">NexoraX AI</h2>
                <p class="text-sm text-gray-500 mb-6">Trí tuệ nhân tạo thế hệ mới - Đồng hành cùng sự sáng tạo</p>
                
                <div class="text-sm text-gray-600 space-y-4 text-left">
                    <div class="bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-xl">
                        <p class="leading-relaxed">
                            <strong>NexoraX</strong> là nền tảng trí tuệ nhân tạo đa mô hình tiên tiến, tích hợp 19+ models AI hàng đầu thế giới. 
                            Chúng tôi mang đến trải nghiệm chat thông minh với khả năng tìm kiếm web, tạo hình ảnh và so sánh đa mô hình - tất cả trong một giao diện hiện đại, mượt mà.
                        </p>
                    </div>
                    
                    <div class="mt-5">
                        <h3 class="font-bold text-gray-800 mb-3 flex items-center gap-2">
                            <span class="text-xl">🚀</span> Tính năng vượt trội
                        </h3>
                        <div class="grid grid-cols-1 gap-2">
                            <div class="flex items-start gap-2 bg-white p-3 rounded-lg border border-gray-100">
                                <span class="text-lg">💬</span>
                                <div>
                                    <strong class="text-gray-800">Dual Chat Mode:</strong>
                                    <span class="text-gray-600"> So sánh 2 AI models cùng lúc, chọn câu trả lời tốt nhất</span>
                                </div>
                            </div>
                            <div class="flex items-start gap-2 bg-white p-3 rounded-lg border border-gray-100">
                                <span class="text-lg">🔍</span>
                                <div>
                                    <strong class="text-gray-800">Gemini Search:</strong>
                                    <span class="text-gray-600"> Tìm kiếm thông tin real-time từ Internet với độ chính xác cao</span>
                                </div>
                            </div>
                            <div class="flex items-start gap-2 bg-white p-3 rounded-lg border border-gray-100">
                                <span class="text-lg">🎨</span>
                                <div>
                                    <strong class="text-gray-800">Image Generation:</strong>
                                    <span class="text-gray-600"> Tạo hình ảnh AI chất lượng cao từ văn bản với Pollinations AI</span>
                                </div>
                            </div>
                            <div class="flex items-start gap-2 bg-white p-3 rounded-lg border border-gray-100">
                                <span class="text-lg">⚡</span>
                                <div>
                                    <strong class="text-gray-800">19+ AI Models:</strong>
                                    <span class="text-gray-600"> GPT-5, DeepSeek, Gemini, Mistral và nhiều models khác</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-5 bg-gradient-to-r from-purple-50 to-blue-50 p-4 rounded-xl border border-purple-100">
                        <h3 class="font-bold text-gray-800 mb-2 flex items-center gap-2">
                            <span class="text-xl">🎯</span> Phù hợp cho
                        </h3>
                        <div class="text-sm text-gray-700 space-y-1">
                            <p>✨ Học sinh, sinh viên: Giải đáp bài tập, nghiên cứu kiến thức</p>
                            <p>💻 Lập trình viên: Hỗ trợ code, debug và học công nghệ mới</p>
                            <p>🎨 Nhà sáng tạo: Viết nội dung, thiết kế ý tưởng, tạo hình ảnh</p>
                            <p>📚 Người đam mê công nghệ: Khám phá AI, thử nghiệm models</p>
                        </div>
                    </div>

                    <div class="mt-5 text-center">
                        <button id="goToSettingsBtn" class="bg-gradient-to-r from-blue-500 to-purple-600 text-white px-8 py-3 rounded-xl hover:shadow-2xl transition-all duration-300 transform hover:scale-105 text-sm font-semibold">
                            ⚙️ Khám phá Cài đặt
                        </button>
                    </div>
                    
                    <div class="mt-5 pt-4 border-t border-gray-200">
                        <p class="text-xs text-center text-gray-500">
                            <strong>Phát triển bởi:</strong> PHAN TRỌNG KHANG<br>
                            <span class="text-gray-400">Trường THCS Vĩnh Hòa • Version 2.0</span>
                        </p>
                    </div>
                </div>
            </div>
            <div class="flex justify-center mt-6">
                <button id="closeAbout" class="px-4 py-2 text-blue-600 hover:text-blue-800 transition-colors">
                    Đóng
                </button>
            </div>
        </div>
    </div>
    
    <!-- Clear All Modal -->
    <div id="clearAllModal" class="fixed inset-0 bg-black bg-opacity-50 z-[100] hidden flex items-center justify-center p-4">
        <div id="clearAllContent" class="bg-white rounded-2xl p-6 w-full max-w-md scale-95 opacity-0 transition-all duration-300">
            <div class="text-center">
                <div class="w-12 h-12 mx-auto mb-4 bg-red-100 rounded-full flex items-center justify-center">
                    <svg class="w-6 h-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                    </svg>
                </div>
                <h2 class="text-xl font-bold text-gray-900 mb-2">Xóa tất cả cuộc trò chuyện</h2>
                <p class="text-gray-600 mb-6">Bạn có chắc chắn muốn xóa tất cả cuộc trò chuyện? Hành động này không thể hoàn tác.</p>
                <div class="flex space-x-3">
                    <button id="cancelClearAll" class="flex-1 px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
                        Hủy
                    </button>
                    <button id="confirmClearAll" class="flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors">
                        Xóa tất cả
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Feedback Modal -->
    <div id="feedbackModal" class="fixed inset-0 bg-black bg-opacity-50 z-[100] hidden flex items-center justify-center p-4">
        <div id="feedbackContent" class="bg-white rounded-2xl p-6 w-full max-w-md scale-95 opacity-0 transition-all duration-300">
            <div class="text-center mb-6">
                <h2 class="text-xl font-bold text-gray-900 mb-2">Đánh giá NexoraX</h2>
                <p class="text-gray-600">Chia sẻ trải nghiệm của bạn với chúng tôi</p>
            </div>
            
            <div class="mb-6">
                <div class="text-center mb-4">
                    <div id="starRating" class="flex justify-center space-x-1">
                        <svg class="star w-8 h-8 text-gray-300 cursor-pointer hover:text-yellow-400 transition-colors" data-rating="1" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
                        </svg>
                        <svg class="star w-8 h-8 text-gray-300 cursor-pointer hover:text-yellow-400 transition-colors" data-rating="2" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
                        </svg>
                        <svg class="star w-8 h-8 text-gray-300 cursor-pointer hover:text-yellow-400 transition-colors" data-rating="3" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
                        </svg>
                        <svg class="star w-8 h-8 text-gray-300 cursor-pointer hover:text-yellow-400 transition-colors" data-rating="4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
                        </svg>
                        <svg class="star w-8 h-8 text-gray-300 cursor-pointer hover:text-yellow-400 transition-colors" data-rating="5" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
                        </svg>
                    </div>
                    <p id="ratingText" class="text-sm text-gray-600 mt-2">Nhấn vào sao để đánh giá</p>
                </div>
                
                <textarea
                    id="feedbackText"
                    placeholder="Chia sẻ góp ý của bạn (không bắt buộc)..."
                    class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"
                    rows="3"
                ></textarea>
            </div>
            
            <div class="flex space-x-3">
                <button id="cancelFeedback" class="flex-1 px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
                    Hủy
                </button>
                <button id="submitFeedback" class="flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                    Gửi đánh giá
                </button>
            </div>
        </div>
    </div>
    
    <!-- Authentication Modal -->
    <div id="authModal" class="fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm z-[200] hidden flex items-center justify-center p-4">
        <div id="authContent" class="relative bg-white rounded-2xl w-[90vw] max-w-[420px] max-h-[90vh] overflow-y-auto shadow-2xl scale-95 opacity-0 transition-all duration-180">
            <!-- Close Button -->
            <div class="absolute top-4 right-4 z-10">
                <button id="closeAuthModal" class="p-2 hover:bg-gray-100 rounded-lg transition-colors" aria-label="Close authentication modal">
                    <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Modal Header -->
            <div class="p-6 md:p-8 pb-0">
                <h2 class="text-2xl font-semibold text-gray-900">Chào mừng đến NexoraX</h2>
            </div>
            
            <!-- Tab System -->
            <div class="relative px-6 md:px-8 pt-4">
                <div class="flex gap-4 border-b border-gray-200">
                    <button id="loginTab" class="relative py-3 text-sm font-medium text-gray-600 hover:text-blue-600 transition-colors" aria-label="Login tab">
                        Đăng nhập
                    </button>
                    <button id="signupTab" class="relative py-3 text-sm font-medium text-blue-600 transition-colors" aria-label="Signup tab">
                        Đăng ký
                    </button>
                </div>
                <!-- Tab Indicator -->
                <div id="tabIndicator" class="absolute bottom-0 left-6 md:left-8 h-0.5 bg-blue-600 transition-all duration-200" style="width: 64px; transform: translateX(84px);"></div>
            </div>
            
            <!-- Content -->
            <div class="px-6 md:px-8 py-5">
                <!-- Login Form -->
                <form id="loginForm" class="hidden space-y-3" onsubmit="event.preventDefault();">
                    <div>
                        <input 
                            type="text" 
                            id="loginUsername" 
                            name="username"
                            placeholder="Username hoặc Email"
                            class="w-full px-4 py-2.5 text-sm border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"
                            aria-label="Username or Email"
                            autocomplete="username"
                        >
                    </div>
                    
                    <div>
                        <input 
                            type="password" 
                            id="loginPassword" 
                            name="password"
                            placeholder="Mật khẩu"
                            class="w-full px-4 py-2.5 text-sm border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"
                            aria-label="Password"
                            autocomplete="current-password"
                        >
                    </div>
                    
                    <div class="flex items-center">
                        <input 
                            type="checkbox" 
                            id="rememberMe" 
                            class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"
                        >
                        <label for="rememberMe" class="ml-2 text-sm text-gray-600">Nhớ đăng nhập (30 ngày)</label>
                    </div>
                    
                    <button type="button" id="loginBtn" class="w-full h-11 bg-blue-600 text-white text-base font-semibold rounded-xl hover:bg-blue-700 transition-colors">
                        Đăng nhập
                    </button>
                    
                    <div class="relative py-2">
                        <div class="absolute inset-0 flex items-center">
                            <div class="w-full border-t border-gray-200"></div>
                        </div>
                        <div class="relative flex justify-center text-xs">
                            <span class="px-2 bg-white text-slate-500">hoặc</span>
                        </div>
                    </div>
                    
                    <button type="button" id="loginGithubBtn" class="w-full h-11 bg-gray-900 text-white text-sm font-medium rounded-xl hover:bg-gray-800 transition-all flex items-center justify-center gap-2 opacity-50 cursor-not-allowed" disabled aria-label="Login with GitHub">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/>
                        </svg>
                        <span>Login with GitHub</span>
                    </button>
                    <p class="text-xs text-center text-slate-500">GitHub login coming soon</p>
                </form>
                
                <!-- Signup Form -->
                <div id="signupForm" class="space-y-3">
                    <!-- Email Signup (Primary) -->
                    <form id="signupEmailForm" class="space-y-3" onsubmit="event.preventDefault();">
                        <div>
                            <input 
                                type="email" 
                                id="signupEmail" 
                                name="email"
                                placeholder="Email"
                                class="w-full px-4 py-2.5 text-sm border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"
                                aria-label="Email address"
                                autocomplete="email"
                            >
                        </div>
                        
                        <div>
                            <input 
                                type="text" 
                                id="signupEmailUsername" 
                                name="username"
                                placeholder="Username"
                                class="w-full px-4 py-2.5 text-sm border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"
                                aria-label="Username"
                                autocomplete="username"
                            >
                        </div>
                        
                        <div>
                            <input 
                                type="password" 
                                id="signupEmailPassword" 
                                name="password"
                                placeholder="Mật khẩu (tối thiểu 6 ký tự)"
                                class="w-full px-4 py-2.5 text-sm border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"
                                aria-label="Password"
                                autocomplete="new-password"
                            >
                        </div>
                        
                        <button type="button" id="signupEmailBtn" class="w-full h-11 bg-blue-600 text-white text-base font-semibold rounded-xl hover:bg-blue-700 transition-colors">
                            Đăng ký với Email
                        </button>
                    </form>
                    
                    <!-- Divider -->
                    <div class="relative py-2">
                        <div class="absolute inset-0 flex items-center">
                            <div class="w-full border-t border-gray-200"></div>
                        </div>
                        <div class="relative flex justify-center text-xs">
                            <span class="px-2 bg-white text-slate-500">hoặc</span>
                        </div>
                    </div>
                    
                    <!-- GitHub Button -->
                    <button type="button" id="signupGithubBtn" class="w-full h-11 bg-gray-900 text-white text-sm font-medium rounded-xl hover:bg-gray-800 transition-all flex items-center justify-center gap-2 opacity-50 cursor-not-allowed" disabled aria-label="Sign up with GitHub">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/>
                        </svg>
                        <span>Sign up with GitHub</span>
                    </button>
                    <p class="text-xs text-center text-slate-500">Coming soon</p>
                    
                    <!-- Expandable Username Option -->
                    <div class="pt-2">
                        <button type="button" id="toggleUsernameSignup" class="text-sm text-blue-600 hover:text-blue-700 transition-colors">
                            → Dùng username thay vì email
                        </button>
                    </div>
                    
                    <!-- Username Signup (Hidden by default) -->
                    <form id="signupUsernameForm" class="hidden space-y-3 pt-2" onsubmit="event.preventDefault();">
                        <div>
                            <input 
                                type="text" 
                                id="signupUsernameOnly" 
                                name="username"
                                placeholder="Username"
                                class="w-full px-4 py-2.5 text-sm border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"
                                aria-label="Username"
                                autocomplete="username"
                            >
                        </div>
                        
                        <div>
                            <input 
                                type="password" 
                                id="signupUsernamePassword" 
                                name="password"
                                placeholder="Mật khẩu (tối thiểu 6 ký tự)"
                                class="w-full px-4 py-2.5 text-sm border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"
                                aria-label="Password"
                                autocomplete="new-password"
                            >
                        </div>
                        
                        <button type="button" id="signupUsernameBtn" class="w-full h-11 bg-blue-600 text-white text-base font-semibold rounded-xl hover:bg-blue-700 transition-colors">
                            Đăng ký
                        </button>
                        
                        <button type="button" id="backToEmailSignup" class="text-sm text-blue-600 hover:text-blue-700 transition-colors">
                            ← Dùng email
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Import main module - tất cả các module khác đã được import trong main.js -->
    <script type="module" src="src/js/main.js"></script>
</body>
</html>